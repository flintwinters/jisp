{"op": "add", "doc": "Pops two numeric values 'a' and 'b' from the top of the stack, computes their sum 'a + b', and pushes the resulting number back onto the stack.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "number"}, "stub": "Adds two numbers from the stack."}
{"op": "and", "doc": "Pops two boolean values from the stack. It computes the logical AND (&&) of these values and pushes the single boolean result back onto the stack.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "boolean"}, "stub": "Performs logical AND on two booleans."}
{"op": "assert", "doc": "Pops a boolean value from the stack. If the value is 'false', it halts execution and raises an error. An optional string argument can be provided to customize the error message; otherwise, a default 'assertion failed' message is used.", "args": {"type": "array", "minItems": 0, "maxItems": 1, "items": {"type": "string"}}, "output": {"type": "null"}, "stub": "Asserts a condition is true, else errors."}
{"op": "await", "doc": "Pops a Jisp program object (that must have been spawned) from the stack. It reads the 'pid' from this object, blocks execution until the program with that 'pid' has completed, and then pushes the final, completed program state back onto the stack.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "object"}, "stub": "Waits for a spawned program to complete."}
{"op": "break", "doc": "Immediately terminates the execution of the nearest enclosing 'for' or 'while' loop. Program control continues at the first instruction following the loop.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "null"}, "stub": "Exits the current loop immediately."}
{"op": "breakpoint", "doc": "Halts program execution when encountered if the program is in debug mode, allowing for inspection of the program state. This operation is a no-op if not in debug mode.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "null"}, "stub": "Triggers debugger at the current location."}
{"op": "call", "doc": "Executes a function. It pops either a function name (string) or a raw array of operations from the stack. It then executes this code in a new call frame with a new, isolated scope for local variables. Execution continues until a 'return' operation is encountered or the function's code completes.", "args": {"type": "array", "maxItems": 0}, "output": {}, "stub": "Calls a function."}
{"op": "concat", "doc": "Pops two string values from the stack, concatenates them in order (first popped string, then second popped string), and pushes the resulting single string back onto the stack.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "string"}, "stub": "Concatenates two strings from the stack."}
{"op": "continue", "doc": "Skips the remaining operations in the current iteration of the nearest enclosing 'for' or 'while' loop and proceeds to the next iteration.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "null"}, "stub": "Skips to the next iteration of a loop."}
{"op": "delete", "doc": "Pops a variable name (as a string) from the stack and deletes the corresponding variable from the current scope. If the variable does not exist, it does nothing.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "null"}, "stub": "Deletes a variable."}
{"op": "difference", "doc": "Pops two arrays, 'a' and 'b', from the stack. It computes the set difference, returning a new array containing elements that are in 'a' but not in 'b'. The result is pushed back onto the stack.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "array"}, "stub": "Computes the set difference of two arrays."}
{"op": "div", "doc": "Pops two numeric values 'a' and 'b' from the stack, computes their quotient 'a / b', and pushes the resulting number back onto the stack. Division by zero will cause an error.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "number"}, "stub": "Divides two numbers from the stack."}
{"op": "eq", "doc": "Pops two values of any type from the stack and performs a strict equality check. It pushes 'true' if the values are identical in type and value, and 'false' otherwise.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "boolean"}, "stub": "Checks if two values are equal."}
{"op": "exists", "doc": "Pops a variable name (string) from the stack and checks if a variable with that name exists in the current scope. Pushes 'true' if it exists, 'false' otherwise.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "boolean"}, "stub": "Checks if a variable exists."}
{"op": "exit", "doc": "Immediately terminates the execution of the entire Jisp program. The final state of the program is returned. This is a hard stop.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "null"}, "stub": "Stops program execution immediately."}
{"op": "filter", "doc": "Pops an input array, a variable name (string), and a block of conditional operations. It iterates through the array, assigning each element to the named variable and executing the conditional block. If the block evaluates to 'true', the original element is included in a new result array, which is pushed to the stack after the loop completes.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "array"}, "stub": "Filters an array based on a condition."}
{"op": "for", "doc": "Executes a block of operations for each element in a collection (array or object). Takes three arguments: a string for the loop variable name, the collection itself (or a variable name pointing to it), and the block of operations to execute. For each iteration, the current element is assigned to the loop variable.", "args": {"type": "array", "minItems": 3, "maxItems": 3, "items": [{"type": "string"}, {}, {"type": "array", "items": {"type": "array"}}]}, "output": {"type": "null"}, "stub": "Iterates over a collection."}
{"op": "foreach", "doc": "This operation is an alias for the 'for' operation and behaves identically. It executes a block of operations for each element in a collection.", "args": {"type": "array", "minItems": 3, "maxItems": 3, "items": [{"type": "string"}, {}, {"type": "array", "items": {"type": "array"}}]}, "output": {"type": "null"}, "stub": "Alias for the `for` operation."}
{"op": "get", "doc": "Retrieves a value from the variables map and pushes it onto the stack. It can be used in several ways: with no arguments, it pops a path from the stack; with one or more arguments, it uses each argument as a path to retrieve values. Paths can be simple strings for top-level variables or arrays for nested access.", "args": {"type": "array", "items": {"oneOf": [{"type": "string"}, {"type": "array", "items": {"type": ["string", "number"]}}]}}, "output": {}, "stub": "Gets a value from a variable."}
{"op": "gt", "doc": "Pops two values 'a' and 'b' from the stack (numbers or strings) and compares them. It pushes 'true' if 'a' is strictly greater than 'b', and 'false' otherwise.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "boolean"}, "stub": "Checks if one value is greater than another."}
{"op": "if", "doc": "Performs conditional execution. It pops a boolean value from the stack. If the value is 'true', it executes the 'then' block of operations provided as the first argument. If the value is 'false', it executes the optional 'else' block provided as the second argument. If there is no 'else' block, it does nothing.", "args": {"type": "array", "minItems": 1, "maxItems": 2, "items": [{"type": "array", "items": {"type": "array"}}, {"type": "array", "items": {"type": "array"}}]}, "output": {"type": "null"}, "stub": "Conditionally executes code."}
{"op": "intersection", "doc": "Pops two arrays from the stack and computes their set intersection. It returns a new array containing only the elements that are present in both input arrays. The result is pushed onto the stack.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "array"}, "stub": "Computes the set intersection of two arrays."}
{"op": "join", "doc": "Pops a left array, a right array, a left element name, a right element name, and a conditional block of operations. It performs a relational join by iterating through the Cartesian product of the two arrays. For each pair of elements, it executes the conditional block. If the result is 'true', a new object containing both elements (under their specified names) is added to a result array, which is pushed to the stack.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "array"}, "stub": "Performs a relational join on two arrays."}
{"op": "keys", "doc": "Pops an object (map) from the stack and creates an array containing all of its keys as strings. The resulting array of keys is pushed back onto the stack.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "array", "items": {"type": "string"}}, "stub": "Gets the keys of an object."}
{"op": "len", "doc": "Pops a value from the stack and pushes its length. This operation works on strings (number of characters), arrays (number of elements), and objects (number of key-value pairs).", "args": {"type": "array", "maxItems": 0}, "output": {"type": "number"}, "stub": "Gets the length of a string, array, or object."}
{"op": "lower", "doc": "Pops a string from the stack, converts all of its characters to lowercase, and pushes the resulting new string back onto the stack.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "string"}, "stub": "Converts a string to lowercase."}
{"op": "lt", "doc": "Pops two values 'a' and 'b' from the stack (numbers or strings) and compares them. It pushes 'true' if 'a' is strictly less than 'b', and 'false' otherwise.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "boolean"}, "stub": "Checks if one value is less than another."}
{"op": "map", "doc": "Pops an input array, a variable name (string), and a block of transformation operations. It creates a new array by applying the block of operations to each element of the input array. For each element, it's assigned to the named variable before the block is executed. The result of the block is stored in the new array. The final array of transformed values is pushed to the stack.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "array"}, "stub": "Applies a function to each element of an array."}
{"op": "mod", "doc": "Pops two numeric values 'a' and 'b' from the stack, computes the remainder of 'a' divided by 'b' (modulo operation), and pushes the result back onto the stack.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "number"}, "stub": "Computes the modulo of two numbers."}
{"op": "mul", "doc": "Pops two numeric values 'a' and 'b' from the top of the stack, computes their product 'a * b', and pushes the resulting number back onto the stack.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "number"}, "stub": "Multiplies two numbers from the stack."}
{"op": "noop", "doc": "An explicit no-operation instruction. It has no effect on the program state. It is useful as a placeholder or for debugging purposes.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "null"}, "stub": "Does nothing."}
{"op": "not", "doc": "Pops a single boolean value from the stack, computes its logical negation (!), and pushes the resulting boolean back onto the stack.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "boolean"}, "stub": "Performs logical NOT on a boolean."}
{"op": "or", "doc": "Pops two boolean values from the stack. It computes the logical OR (||) of these values and pushes the single boolean result back onto the stack.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "boolean"}, "stub": "Performs logical OR on two booleans."}
{"op": "pop", "doc": "Pops the top value from the stack and assigns it to a variable. The name of the variable is provided as a string argument to the operation.", "args": {"type": "array", "minItems": 1, "maxItems": 1, "items": {"type": "string"}}, "output": {"type": "null"}, "stub": "Pops a value from the stack into a variable."}
{"op": "push", "doc": "Takes a single value as an argument and pushes it onto the top of the stack. The value can be of any JSON-compatible type.", "args": {"type": "array", "minItems": 1, "maxItems": 1, "items": {}}, "output": {"type": "null"}, "stub": "Pushes a value onto the stack."}
{"op": "raise", "doc": "Pops a string from the stack and halts execution by raising an error. The popped string is used as the error message. This can be caught by a 'try' block.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "null"}, "stub": "Raises an error with a message."}
{"op": "range", "doc": "Pops three numbers: 'start', 'stop', and 'step'. It generates an array of numbers starting from 'start', incrementing by 'step', and ending before 'stop'. The resulting array is pushed onto the stack.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "array", "items": {"type": "number"}}, "stub": "Generates a range of numbers."}
{"op": "reduce", "doc": "Pops an input array, a block of operations, and an initial accumulator value. It iterates through the array, applying the operations to the current accumulator and the current element. The result of the block becomes the new accumulator for the next iteration. The final accumulator value is pushed to the stack.", "args": {"type": "array", "maxItems": 0}, "output": {}, "stub": "Reduces an array to a single value."}
{"op": "replace", "doc": "Pops three strings from the stack: an input string 'str', a substring to find 'old', and a replacement string 'new'. It replaces all occurrences of 'old' with 'new' within 'str' and pushes the modified string onto the stack.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "string"}, "stub": "Replaces substrings in a string."}
{"op": "return", "doc": "Ends the execution of the current function and returns control to the caller. Any value left on the top of the stack will be passed back to the caller's context, becoming the return value of the 'call' operation.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "null"}, "stub": "Returns from a function call."}
{"op": "run", "doc": "Pops a full Jisp program state object from the stack and executes it until it completes, hits a breakpoint, or encounters an error. The final state of the sub-program is then pushed back onto the main program's stack.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "object"}, "stub": "Runs a Jisp sub-program to completion."}
{"op": "set", "doc": "Assigns a value to a variable. It supports different modes: without arguments, it pops both the value and the destination path from the stack. With one argument (the path), it pops just the value. With multiple path arguments, it pops a corresponding number of values and assigns them. Paths can be simple strings or arrays for nested objects.", "args": {"type": "array", "items": {"oneOf": [{"type": "string"}, {"type": "array", "items": {"type": ["string", "number"]}}]}}, "output": {"type": "null"}, "stub": "Sets the value of a variable."}
{"op": "slice", "doc": "Extracts a portion of a string or an array. It pops the collection (string or array), a 'start' index, and an optional 'end' index. It returns a new string or array containing the elements from 'start' up to (but not including) 'end'. If 'end' is omitted, it slices to the end of the collection.", "args": {"type": "array", "maxItems": 0}, "output": {"oneOf": [{"type": "array"}, {"type": "string"}]}, "stub": "Extracts a slice from a string or array."}
{"op": "sort", "doc": "Pops an array from the stack and sorts it. The array must contain either all numbers or all strings. The sorted array is then pushed back onto the stack.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "array"}, "stub": "Sorts an array of numbers or strings."}
{"op": "spawn", "doc": "Pops a full Jisp program state object from the stack and executes it concurrently. It assigns a unique 'pid' to the program object and pushes the entire object back onto the stack. This object can then be used with the 'await' operation.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "object"}, "stub": "Runs a Jisp sub-program concurrently and pushes it back with a PID."}
{"op": "step", "doc": "Pops a full Jisp program state object from the stack. It executes only the single next instruction within that sub-program's context and then pushes the entire modified program state object back onto the stack. This is a core operation for debugging and meta-programming.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "object"}, "stub": "Executes one instruction in a Jisp sub-program."}
{"op": "sub", "doc": "Pops two numeric values 'a' and 'b' from the stack, computes their difference 'a - b', and pushes the resulting number back onto the stack.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "number"}, "stub": "Subtracts two numbers from the stack."}
{"op": "to_string", "doc": "Pops any value from the stack and converts it into its canonical string representation. The resulting string is pushed back onto the stack. Useful for debugging or creating dynamic string content.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "string"}, "stub": "Converts a value to its string representation."}
{"op": "trim", "doc": "Pops a string from the stack and removes any leading and trailing whitespace characters (spaces, tabs, newlines). The trimmed string is pushed back onto the stack.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "string"}, "stub": "Trims whitespace from a string."}
{"op": "try", "doc": "Provides error handling. It executes a 'try' block of operations. If an error is raised during its execution, the program state is rolled back, the error object is stored in the named 'catch' variable, and an optional 'catch' block of operations is executed. If no error occurs, the 'catch' block is skipped.", "args": {"type": "array", "minItems": 2, "maxItems": 3, "items": [{"type": "array", "items": {"type": "array"}}, {"type": "string"}, {"type": "array", "items": {"type": "array"}}]}, "output": {"type": "null"}, "stub": "Handles errors with a catch block."}
{"op": "undo", "doc": "Pops a Jisp program state object from the stack. It reverts the last instruction that was executed within that sub-program, using a history of state changes stored within the object. The reverted program state is then pushed back onto the stack. Requires 'save_history' to be enabled on the sub-program.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "object"}, "stub": "Reverts the last instruction in a Jisp sub-program."}
{"op": "union", "doc": "Pops two arrays from the stack and computes their set union. It returns a new array containing all unique elements from both input arrays. The result is pushed onto the stack.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "array"}, "stub": "Computes the set union of two arrays."}
{"op": "upper", "doc": "Pops a string from the stack, converts all of its characters to uppercase, and pushes the resulting new string back onto the stack.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "string"}, "stub": "Converts a string to uppercase."}
{"op": "valid", "doc": "Pops a JSON document and a JSON schema from the stack. It validates the document against the schema and pushes a boolean result: 'true' if the document conforms to the schema, 'false' otherwise.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "boolean"}, "stub": "Validates a document against a JSON schema."}
{"op": "values", "doc": "Pops an object (map) from the stack and creates an array containing all of its values. The order of values in the array is not guaranteed. The resulting array is pushed back onto the stack.", "args": {"type": "array", "maxItems": 0}, "output": {"type": "array"}, "stub": "Gets the values of an object."}
{"op": "while", "doc": "Executes a block of operations repeatedly as long as a specified condition is true. It takes two arguments: the name of a variable that must hold a boolean value, and the block of operations to form the loop body. The condition is checked before each iteration.", "args": {"type": "array", "minItems": 2, "maxItems": 2, "items": [{"type": "string"}, {"type": "array", "items": {"type": "array"}}]}, "output": {"type": "null"}, "stub": "Executes a loop while a condition is true."}
