[
  {
    "description": "Sanity Check 1: Simple stack-based addition.",
    "jisp_program": {
      "code": [
        [
          "push",
          5.0
        ],
        [
          "push",
          3.0
        ],
        [
          "add"
        ],
        [
          "pop",
          "result_of_addition"
        ]
      ]
    },
    "validation_schema": {
      "type": "object",
      "properties": {
        "stack": {
          "type": "array",
          "maxItems": 0
        },
        "state": {
          "type": "object",
          "properties": {
            "result_of_addition": {
              "type": "number",
              "const": 8.0
            }
          },
          "required": [
            "result_of_addition"
          ],
          "additionalProperties": true
        }
      },
      "required": [
        "stack",
        "state"
      ],
      "additionalProperties": true
    }
  },
  {
    "description": "Sanity Check 2: Variable assignment and retrieval.",
    "jisp_program": {
      "code": [
        [
          "push",
          "Hello, JISP!"
        ],
        [
          "push",
          "my_variable"
        ],
        [
          "set"
        ],
        [
          "push",
          "my_variable"
        ],
        [
          "get"
        ],
        [
          "pop",
          "retrieved_message"
        ]
      ]
    },
    "validation_schema": {
      "type": "object",
      "properties": {
        "stack": {
          "type": "array",
          "maxItems": 0
        },
        "variables": {
          "type": "object",
          "properties": {
            "my_variable": {
              "type": "string",
              "const": "Hello, JISP!"
            }
          },
          "required": [
            "my_variable"
          ],
          "additionalProperties": true
        },
        "state": {
          "type": "object",
          "properties": {
            "retrieved_message": {
              "type": "string",
              "const": "Hello, JISP!"
            }
          },
          "required": [
            "retrieved_message"
          ],
          "additionalProperties": true
        }
      },
      "required": [
        "stack",
        "variables",
        "state"
      ],
      "additionalProperties": true
    }
  },
  {
    "description": "Test Case 3: Exists operation - variable exists.",
    "jisp_program": {
      "code": [
        [
          "push",
          "some_value"
        ],
        [
          "push",
          "existing_var"
        ],
        [
          "set"
        ],
        [
          "push",
          "existing_var"
        ],
        [
          "exists"
        ]
      ]
    },
    "validation_schema": {
      "type": "object",
      "properties": {
        "stack": {
          "type": "array",
          "minItems": 1,
          "maxItems": 1,
          "items": {
            "type": "boolean",
            "const": true
          }
        },
        "variables": {
          "type": "object",
          "properties": {
            "existing_var": {
              "type": "string",
              "const": "some_value"
            }
          },
          "required": [
            "existing_var"
          ],
          "additionalProperties": true
        }
      },
      "required": [
        "stack",
        "variables"
      ],
      "additionalProperties": true
    }
  },
  {
    "description": "Test Case 4: Exists operation - variable does not exist.",
    "jisp_program": {
      "code": [
        [
          "push",
          "non_existent_var"
        ],
        [
          "exists"
        ]
      ]
    },
    "validation_schema": {
      "type": "object",
      "properties": {
        "stack": {
          "type": "array",
          "minItems": 1,
          "maxItems": 1,
          "items": {
            "type": "boolean",
            "const": false
          }
        },
        "variables": {
          "type": "object",
          "maxProperties": 0
        }
      },
      "required": [
        "stack",
        "variables"
      ],
      "additionalProperties": true
    }
  },
  {
    "description": "Test Case 5: Delete operation.",
    "jisp_program": {
      "code": [
        [
          "push",
          "value_to_delete"
        ],
        [
          "push",
          "var_to_delete"
        ],
        [
          "set"
        ],
        [
          "push",
          "var_to_delete"
        ],
        [
          "delete"
        ]
      ]
    },
    "validation_schema": {
      "type": "object",
      "properties": {
        "stack": {
          "type": "array",
          "maxItems": 0
        },
        "variables": {
          "type": "object",
          "maxProperties": 0
        }
      },
      "required": [
        "stack",
        "variables"
      ],
      "additionalProperties": true
    }
  },
  {
    "description": "Test Case 6: Eq operation - equal values.",
    "jisp_program": {
      "code": [
        [
          "push",
          10.0
        ],
        [
          "push",
          10.0
        ],
        [
          "eq"
        ]
      ]
    },
    "validation_schema": {
      "type": "object",
      "properties": {
        "stack": {
          "type": "array",
          "minItems": 1,
          "maxItems": 1,
          "items": {
            "type": "boolean",
            "const": true
          }
        }
      },
      "required": [
        "stack"
      ],
      "additionalProperties": true
    }
  },
  {
    "description": "Test Case 7: Eq operation - unequal values.",
    "jisp_program": {
      "code": [
        [
          "push",
          10.0
        ],
        [
          "push",
          20.0
        ],
        [
          "eq"
        ]
      ]
    },
    "validation_schema": {
      "type": "object",
      "properties": {
        "stack": {
          "type": "array",
          "minItems": 1,
          "maxItems": 1,
          "items": {
            "type": "boolean",
            "const": false
          }
        }
      },
      "required": [
        "stack"
      ],
      "additionalProperties": true
    }
  },
  {
    "description": "Test Case 8: If operation - true condition, then block executes.",
    "jisp_program": {
      "code": [
        [
          "push",
          true
        ],
        [
          "if",
          [
            [
              "push",
              "then_executed"
            ],
            [
              "pop",
              "if_result"
            ]
          ]
        ]
      ]
    },
    "validation_schema": {
      "type": "object",
      "properties": {
        "stack": {
          "type": "array",
          "maxItems": 0
        },
        "state": {
          "type": "object",
          "properties": {
            "if_result": {
              "type": "string",
              "const": "then_executed"
            }
          },
          "required": [
            "if_result"
          ],
          "additionalProperties": true
        }
      },
      "required": [
        "stack",
        "state"
      ],
      "additionalProperties": true
    }
  },
  {
    "description": "Test Case 9: If operation - false condition, else block executes.",
    "jisp_program": {
      "code": [
        [
          "push",
          false
        ],
        [
          "if",
          [
            [
              "push",
              "then_not_executed"
            ],
            [
              "pop",
              "if_result_then"
            ]
          ],
          [
            [
              "push",
              "else_executed"
            ],
            [
              "pop",
              "if_result_else"
            ]
          ]
        ]
      ]
    },
    "validation_schema": {
      "type": "object",
      "properties": {
        "stack": {
          "type": "array",
          "maxItems": 0
        },
        "state": {
          "type": "object",
          "properties": {
            "if_result_else": {
              "type": "string",
              "const": "else_executed"
            }
          },
          "required": [
            "if_result_else"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "stack",
        "state"
      ],
      "additionalProperties": true
    }
  },
  {
    "description": "Test Case 10: If operation - false condition, no else block.",
    "jisp_program": {
      "code": [
        [
          "push",
          false
        ],
        [
          "if",
          [
            [
              "push",
              "should_not_execute"
            ],
            [
              "pop",
              "if_result_no_else"
            ]
          ]
        ]
      ]
    },
    "validation_schema": {
      "type": "object",
      "properties": {
        "stack": {
          "type": "array",
          "maxItems": 0
        },
        "state": {
          "type": "object",
          "maxProperties": 0
        }
      },
      "required": [
        "stack",
        "state"
      ],
      "additionalProperties": true
    }
  },
  {
    "description": "Test Case 11: Trim operation - removes leading/trailing spaces.",
    "jisp_program": {
      "code": [
        [
          "push",
          "  hello world  "
        ],
        [
          "trim"
        ],
        [
          "pop",
          "trimmed_string"
        ]
      ]
    },
    "validation_schema": {
      "type": "object",
      "properties": {
        "stack": {
          "type": "array",
          "maxItems": 0
        },
        "state": {
          "type": "object",
          "properties": {
            "trimmed_string": {
              "type": "string",
              "const": "hello world"
            }
          },
          "required": [
            "trimmed_string"
          ],
          "additionalProperties": true
        }
      },
      "required": [
        "stack",
        "state"
      ],
      "additionalProperties": true
    }
  },
  {
    "description": "Test Case 12: Lower operation - converts string to lowercase.",
    "jisp_program": {
      "code": [
        [
          "push",
          "Hello World"
        ],
        [
          "lower"
        ],
        [
          "pop",
          "lowercased_string"
        ]
      ]
    },
    "validation_schema": {
      "type": "object",
      "properties": {
        "stack": {
          "type": "array",
          "maxItems": 0
        },
        "state": {
          "type": "object",
          "properties": {
            "lowercased_string": {
              "type": "string",
              "const": "hello world"
            }
          },
          "required": [
            "lowercased_string"
          ],
          "additionalProperties": true
        }
      },
      "required": [
        "stack",
        "state"
      ],
      "additionalProperties": true
    }
  },
  {
    "description": "Test Case 13: Upper operation - converts string to uppercase.",
    "jisp_program": {
      "code": [
        [
          "push",
          "Hello World"
        ],
        [
          "upper"
        ],
        [
          "pop",
          "uppercased_string"
        ]
      ]
    },
    "validation_schema": {
      "type": "object",
      "properties": {
        "stack": {
          "type": "array",
          "maxItems": 0
        },
        "state": {
          "type": "object",
          "properties": {
            "uppercased_string": {
              "type": "string",
              "const": "HELLO WORLD"
            }
          },
          "required": [
            "uppercased_string"
          ],
          "additionalProperties": true
        }
      },
      "required": [
        "stack",
        "state"
      ],
      "additionalProperties": true
    }
  },
  {
    "description": "Test Case 14: ToString operation - converts integer to string.",
    "jisp_program": {
      "code": [
        [
          "push",
          123.0
        ],
        [
          "to_string"
        ],
        [
          "pop",
          "string_from_int"
        ]
      ]
    },
    "validation_schema": {
      "type": "object",
      "properties": {
        "stack": {
          "type": "array",
          "maxItems": 0
        },
        "state": {
          "type": "object",
          "properties": {
            "string_from_int": {
              "type": "string",
              "const": "123"
            }
          },
          "required": [
            "string_from_int"
          ],
          "additionalProperties": true
        }
      },
      "required": [
        "stack",
        "state"
      ],
      "additionalProperties": true
    }
  },
  {
    "description": "Test Case 15: Concat operation - concatenates two strings.",
    "jisp_program": {
      "code": [
        [
          "push",
          "hello "
        ],
        [
          "push",
          "world"
        ],
        [
          "concat"
        ],
        [
          "pop",
          "concatenated_string"
        ]
      ]
    },
    "validation_schema": {
      "type": "object",
      "properties": {
        "stack": {
          "type": "array",
          "maxItems": 0
        },
        "state": {
          "type": "object",
          "properties": {
            "concatenated_string": {
              "type": "string",
              "const": "hello world"
            }
          },
          "required": [
            "concatenated_string"
          ],
          "additionalProperties": true
        }
      },
      "required": [
        "stack",
        "state"
      ],
      "additionalProperties": true
    }
  },
  {
    "description": "Test Case 16: While operation - decrements counter.",
    "jisp_program": {
      "code": [
        [
          "push",
          3.0
        ],
        [
          "push",
          "counter"
        ],
        [
          "set"
        ],
        [
          "push",
          true
        ],
        [
          "push",
          "loop_condition"
        ],
        [
          "set"
        ],
        [
          "while",
          "loop_condition",
          [
            [
              "push",
              "counter"
            ],
            [
              "get"
            ],
            [
              "push",
              1.0
            ],
            [
              "sub"
            ],
            [
              "push",
              "counter"
            ],
            [
              "set"
            ],
            [
              "push",
              "counter"
            ],
            [
              "get"
            ],
            [
              "push",
              0.0
            ],
            [
              "eq"
            ],
            [
              "if",
              [
                [
                  "push",
                  false
                ],
                [
                  "push",
                  "loop_condition"
                ],
                [
                  "set"
                ]
              ]
            ]
          ]
        ],
        [
          "push",
          "counter"
        ],
        [
          "get"
        ],
        [
          "pop",
          "final_counter_value"
        ]
      ]
    },
    "validation_schema": {
      "type": "object",
      "properties": {
        "stack": {
          "type": "array",
          "maxItems": 0
        },
        "variables": {
          "type": "object",
          "properties": {
            "counter": {
              "type": "number",
              "const": 0.0
            },
            "loop_condition": {
              "type": "boolean",
              "const": false
            }
          },
          "required": [
            "counter",
            "loop_condition"
          ],
          "additionalProperties": true
        },
        "state": {
          "type": "object",
          "properties": {
            "final_counter_value": {
              "type": "number",
              "const": 0.0
            }
          },
          "required": [
            "final_counter_value"
          ],
          "additionalProperties": true
        }
      },
      "required": [
        "stack",
        "variables",
        "state"
      ],
      "additionalProperties": true
    }
  },
  {
    "description": "Test Case 17: Break in While loop - breaks when counter reaches 2.",
    "jisp_program": {
      "code": [
        [
          "push",
          0.0
        ],
        [
          "push",
          "counter"
        ],
        [
          "set"
        ],
        [
          "push",
          true
        ],
        [
          "push",
          "loop_condition"
        ],
        [
          "set"
        ],
        [
          "while",
          "loop_condition",
          [
            [
              "push",
              "counter"
            ],
            [
              "get"
            ],
            [
              "push",
              1.0
            ],
            [
              "add"
            ],
            [
              "push",
              "counter"
            ],
            [
              "set"
            ],
            [
              "push",
              "counter"
            ],
            [
              "get"
            ],
            [
              "push",
              2.0
            ],
            [
              "eq"
            ],
            [
              "if",
              [
                [
                  "break"
                ]
              ]
            ],
            [
              "push",
              "counter"
            ],
            [
              "get"
            ],
            [
              "push",
              5.0
            ],
            [
              "eq"
            ],
            [
              "if",
              [
                [
                  "push",
                  false
                ],
                [
                  "push",
                  "loop_condition"
                ],
                [
                  "set"
                ]
              ]
            ]
          ]
        ],
        [
          "push",
          "counter"
        ],
        [
          "get"
        ],
        [
          "pop",
          "final_counter_value_break"
        ]
      ]
    },
    "validation_schema": {
      "type": "object",
      "properties": {
        "stack": {
          "type": "array",
          "maxItems": 0
        },
        "variables": {
          "type": "object",
          "properties": {
            "counter": {
              "type": "number",
              "const": 2.0
            }
          },
          "required": [
            "counter"
          ],
          "additionalProperties": true
        },
        "state": {
          "type": "object",
          "properties": {
            "final_counter_value_break": {
              "type": "number",
              "const": 2.0
            }
          },
          "required": [
            "final_counter_value_break"
          ],
          "additionalProperties": true
        }
      },
      "required": [
        "stack",
        "variables",
        "state"
      ],
      "additionalProperties": true
    }
  },
  {
    "description": "Test Case 18: Continue in While loop - skips even numbers.",
    "jisp_program": {
      "code": [
        [
          "push",
          0.0
        ],
        [
          "push",
          "i"
        ],
        [
          "set"
        ],
        [
          "push",
          0.0
        ],
        [
          "push",
          "sum_of_odd_numbers"
        ],
        [
          "set"
        ],
        [
          "push",
          true
        ],
        [
          "push",
          "loop_condition"
        ],
        [
          "set"
        ],
        [
          "while",
          "loop_condition",
          [
            [
              "push",
              "i"
            ],
            [
              "get"
            ],
            [
              "push",
              1.0
            ],
            [
              "add"
            ],
            [
              "push",
              "i"
            ],
            [
              "set"
            ],
            [
              "push",
              "i"
            ],
            [
              "get"
            ],
            [
              "push",
              5.0
            ],
            [
              "gt"
            ],
            [
              "if",
              [
                [
                  "push",
                  false
                ],
                [
                  "push",
                  "loop_condition"
                ],
                [
                  "set"
                ]
              ]
            ],
            [
              "push",
              "i"
            ],
            [
              "get"
            ],
            [
              "push",
              2.0
            ],
            [
              "mod"
            ],
            [
              "push",
              0.0
            ],
            [
              "eq"
            ],
            [
              "if",
              [
                [
                  "continue"
                ]
              ]
            ],
            [
              "push",
              "sum_of_odd_numbers"
            ],
            [
              "get"
            ],
            [
              "push",
              "i"
            ],
            [
              "get"
            ],
            [
              "add"
            ],
            [
              "push",
              "sum_of_odd_numbers"
            ],
            [
              "set"
            ]
          ]
        ],
        [
          "push",
          "sum_of_odd_numbers"
        ],
        [
          "get"
        ],
        [
          "pop",
          "final_sum_of_odd_numbers"
        ]
      ]
    },
    "validation_schema": {
      "type": "object",
      "properties": {
        "stack": {
          "type": "array",
          "maxItems": 0
        },
        "variables": {
          "type": "object",
          "properties": {
            "i": {
              "type": "number",
              "const": 6.0
            },
            "sum_of_odd_numbers": {
              "type": "number",
              "const": 9.0
            }
          },
          "required": [
            "i",
            "sum_of_odd_numbers"
          ],
          "additionalProperties": true
        },
        "state": {
          "type": "object",
          "properties": {
            "final_sum_of_odd_numbers": {
              "type": "number",
              "const": 9.0
            }
          },
          "required": [
            "final_sum_of_odd_numbers"
          ],
          "additionalProperties": true
        }
      },
      "required": [
        "stack",
        "variables",
        "state"
      ],
      "additionalProperties": true
    }
  },
  {
    "description": "Test Case 19: Len operation - string, array, and object.",
    "jisp_program": {
      "code": [
        [
          "push",
          "hello"
        ],
        [
          "len"
        ],
        [
          "pop",
          "string_length"
        ],
        [
          "push",
          [
            1.0,
            2.0,
            3.0,
            4.0
          ]
        ],
        [
          "len"
        ],
        [
          "pop",
          "array_length"
        ],
        [
          "push",
          {
            "a": 1.0,
            "b": 2.0
          }
        ],
        [
          "len"
        ],
        [
          "pop",
          "object_length"
        ]
      ]
    },
    "validation_schema": {
      "type": "object",
      "properties": {
        "stack": {
          "type": "array",
          "maxItems": 0
        },
        "state": {
          "type": "object",
          "properties": {
            "string_length": {
              "type": "number",
              "const": 5.0
            },
            "array_length": {
              "type": "number",
              "const": 4.0
            },
            "object_length": {
              "type": "number",
              "const": 2.0
            }
          },
          "required": [
            "string_length",
            "array_length",
            "object_length"
          ],
          "additionalProperties": true
        }
      },
      "required": [
        "stack",
        "state"
      ],
      "additionalProperties": true
    }
  },
  {
    "description": "Test Case 20: Keys operation - retrieves keys from an object.",
    "jisp_program": {
      "code": [
        [
          "push",
          {
            "name": "Alice",
            "age": 30,
            "city": "New York"
          }
        ],
        [
          "keys"
        ],
        [
          "pop",
          "object_keys"
        ]
      ]
    },
    "validation_schema": {
      "type": "object",
      "properties": {
        "stack": {
          "type": "array",
          "maxItems": 0
        },
        "state": {
          "type": "object",
          "properties": {
            "object_keys": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 3,
              "maxItems": 3,
              "uniqueItems": true,
              "contentSchema": {
                "description": "Array of keys from the object, order may vary."
              }
            }
          },
          "required": [
            "object_keys"
          ],
          "additionalProperties": true
        }
      },
      "required": [
        "stack",
        "state"
      ],
      "additionalProperties": true
    }
  }
]